<div class="breadcrumb-holder">
  <div class="container-fluid">
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item active">Tables </li>
    </ul>
  </div>
</div>
<section>
  <div class="container-fluid">
    <!-- Page Header -->
    <header>
      <h1 class="h3 display">Table Users</h1>
    </header>
  </div>
</section>
<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="container">
        <div class="row">
          <div class="card-header col-lg-3">
            <h4>Basic Table</h4>
          </div>
          <div class="col-lg-3" style="padding-top:10px">
            <%= link_to  new_admin_user_path,  class: "btn btn-primary" do %>
              <i class="fa fa-edit"></i>
            <% end %>
          </div>
        </div>
      </div>
      <hr>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>id</th>
                <th>Name</th>
                <th>Email</th>
                <th>Address</th>
                <th>Phone number</th>
                <th>Role</th>
                <th>Function</th>
              </tr>
            </thead>
            <tbody>
              <% @users.each do |user| %>
                <tr>
                  <th scope="row"><%=user.id%></th>
                    <td><%=user.name%></td>
                    <td><%=user.email%></td>
                    <td><%=user.address%></td>
                    <td><%=user.phone_number%><i class="fas fa-highlighter"></i></td>
                    <td><%=user.role.capitalize%></td>
                    <td>
                    <% if current_user.id == user.id %>
                      <%= link_to edit_admin_user_path(user), class: "btn btn-primary" do  %>
                        <i class="fa fa-edit"></i>
                      <% end %>
                    <% end %>
                    <% if current_user.role == "admin" %>
                      <button class="btn btn-danger">
                        <i class="fa fa-trash"></i>
                        <%= link_to admin_user_path(user),class:"button", method: :delete do %>
                        <% end %>
                      </button>
                    <% end %>
                    </td>
                </tr>
              <%end%>
            </tbody>
            <script>
              $('.btn-danger').click(function(){
                swal({
                  title: "Are you sure?",
                  text: "You will not be able to recover this imaginary file!",
                  type: "warning",
                  showCancelButton: true,
                  confirmButtonColor: '#DD6B55',
                  confirmButtonText: 'Yes, I am sure!',
                  cancelButtonText: "No, cancel it!",
                  closeOnConfirm: false,
                  closeOnCancel: true
                },
                function(isConfirm){
                     if (isConfirm){
                          $('.button').click();
                      } 
                  }
                )
              });
            </script>
          </table>
          <%= will_paginate @users %>
        </div>
      </div>
    </div>
  </div>
</div>


