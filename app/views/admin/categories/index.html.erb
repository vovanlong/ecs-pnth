<div class="breadcrumb-holder">
  <div class="container-fluid">
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item active">Tables </li>
    </ul>
  </div>
</div>
<section>
  <div class="container-fluid">
    <header>
      <h1 class="h3 display">Table Category</h1>
    </header>
  </div>
</section>
<div class="container">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <h4>Category Table</h4>
      </div>
      <div class="col-lg-3" style="padding-top:10px">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#sem-reg">
          Open modal
        </button>
        <%= render 'form' %>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Description</th>
                <th>ID Parent</th>
                <th>Function</th>
              </tr>
            </thead>
            <tbody>
              <% @categories.each do |category| %>
                <tr>
                  <th scope="row"><%=category.id%></th>
                  <td id ="name"><%=category.name%></td>
                  <td><%=category.description%></td>
                  <td><%=category.parent_id%></td>
                  <td>
                  <% if current_user.role == "admin" %>
                    <%= link_to edit_admin_category_path(category), class: "btn btn-primary" do  %>
                      <i class="fa fa-edit"></i>
                    <% end %>
                    
                      <button class="btn btn-danger">
                       <i class="fa fa-trash"></i>
                        <%= link_to admin_category_path(category),class:"button", method: :delete do %>
                        <% end %>
                      </button>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <%= will_paginate @categories %>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  var name = document.getElementById('name').innerText
  console.log("teen category " + name)
  $('.btn-danger').click(function(){
    swal({
    title: "Are you sure?",
    text: "Ban co muon xoa "+ name,
    type: "warning",
    showCancelButton: true,
    confirmButtonColor: '#DD6B55',
    confirmButtonText: 'Yes, I am sure!',
    cancelButtonText: "No, cancel it!",
    closeOnConfirm: false,
    closeOnCancel: true
    },
    function(isConfirm){
      if (isConfirm){
        $('.button').click();
      } 
    }
  )
  });
</script>